<!DOCTYPE html>
<html>
<head>
    <title>Firebase Storage ì´ë¯¸ì§€ URL í…ŒìŠ¤íŠ¸</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        .success { color: green; }
        .error { color: red; }
        input[type="url"] { width: 80%; padding: 5px; }
        button { padding: 8px 15px; margin: 5px; }
        img { max-width: 300px; max-height: 200px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>ğŸ” Firebase Storage ì´ë¯¸ì§€ URL í…ŒìŠ¤íŠ¸</h1>
    
    <div class="test-section">
        <h3>1. ì´ë¯¸ì§€ URL ì§ì ‘ í…ŒìŠ¤íŠ¸</h3>
        <input type="url" id="imageUrl" placeholder="Firebase Storage ì´ë¯¸ì§€ URLì„ ì…ë ¥í•˜ì„¸ìš”">
        <button onclick="testImageUrl()">í…ŒìŠ¤íŠ¸</button>
        <div id="imageResult"></div>
    </div>

    <div class="test-section">
        <h3>2. ì¼ë°˜ì ì¸ 403 ì˜¤ë¥˜ URL íŒ¨í„´</h3>
        <p><strong>ë¬¸ì œ URL ì˜ˆì‹œ:</strong></p>
        <code>https://storage.googleapis.com/firebasestorage/v0/b/flutterproject3-af322.firebase.app/o/posts%2Fimage.jpg?alt=media</code>
        
        <p><strong>ì˜¬ë°”ë¥¸ URL ì˜ˆì‹œ:</strong></p>
        <code>https://firebasestorage.googleapis.com/v0/b/flutterproject3-af322.firebasestorage.app/o/posts%2Fimage.jpg?alt=media&token=YOUR_TOKEN</code>
    </div>

    <script>
        function testImageUrl() {
            const url = document.getElementById('imageUrl').value;
            const resultDiv = document.getElementById('imageResult');
            
            if (!url) {
                resultDiv.innerHTML = '<p class="error">URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>';
                return;
            }
            
            resultDiv.innerHTML = '<p>í…ŒìŠ¤íŠ¸ ì¤‘...</p>';
            
            const img = new Image();
            img.crossOrigin = 'anonymous';
            
            img.onload = function() {
                resultDiv.innerHTML = `
                    <p class="success">âœ… ì´ë¯¸ì§€ ë¡œë”© ì„±ê³µ!</p>
                    <img src="${url}" alt="í…ŒìŠ¤íŠ¸ ì´ë¯¸ì§€">
                    <p><strong>URL:</strong> ${url}</p>
                `;
            };
            
            img.onerror = function() {
                fetch(url, { method: 'HEAD', mode: 'no-cors' })
                .then(() => {
                    resultDiv.innerHTML = `
                        <p class="error">âŒ ì´ë¯¸ì§€ ë¡œë”© ì‹¤íŒ¨ (CORS ë˜ëŠ” ê¶Œí•œ ë¬¸ì œ)</p>
                        <p><strong>URL:</strong> ${url}</p>
                        <p><strong>ì¶”ì²œ í•´ê²°ì±…:</strong></p>
                        <ul>
                            <li>Firebase Storage ê·œì¹™ í™•ì¸</li>
                            <li>CORS ì„¤ì • í™•ì¸</li>
                            <li>URLì— ì˜¬ë°”ë¥¸ í† í° í¬í•¨ ì—¬ë¶€ í™•ì¸</li>
                        </ul>
                    `;
                })
                .catch(() => {
                    resultDiv.innerHTML = `
                        <p class="error">âŒ ì ‘ê·¼ ë¶ˆê°€ (403 ì˜¤ë¥˜ ê°€ëŠ¥ì„± ë†’ìŒ)</p>
                        <p><strong>URL:</strong> ${url}</p>
                    `;
                });
            };
            
            img.src = url;
        }
    </script>
</body>
</html>
